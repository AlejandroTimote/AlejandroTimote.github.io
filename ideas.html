<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Ideas de Detalles</title>

<style>
    body {
        font-family: 'Poppins', sans-serif;
        background: linear-gradient(135deg, #df1836, #ffe4e9);
        margin: 0;
        padding: 0;
        color: #4a4a4a;
    }

    .container {
        max-width: 900px;
        margin: 40px auto;
        background: white;
        padding: 30px;
        border-radius: 25px;
        box-shadow: 0 0 25px rgba(255, 0, 85, 0.25);
        border: 2px solid #ff99b8;
    }

    h1 {
        text-align: center;
        font-size: 36px;
        color: #d72867;
        margin-bottom: 10px;
    }

    .heart {
        text-align: center;
        font-size: 40px;
        margin-bottom: 20px;
    }

    label { font-weight: 600; }

    input, select, textarea {
        width: 100%;
        padding: 12px;
        margin-top: 5px;
        margin-bottom: 15px;
        border-radius: 10px;
        border: 1px solid #ff0000;
        background: #fff7fa;
        font-size: 15px;
    }

    button {
        background: #d72867;
        color: white;
        border: none;
        padding: 12px 18px;
        border-radius: 15px;
        font-size: 16px;
        cursor: pointer;
        transition: 0.2s;
        font-weight: bold;
        margin-right: 10px;
    }

    button:hover {
        background: #b91d55;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 25px;
        background: #fff8fb;
        border-radius: 15px;
        overflow: hidden;
    }

    th {
        background: #ff2a2a;
        color: white;
        padding: 12px;
        font-size: 15px;
    }

    td {
        padding: 12px;
        border-bottom: 1px solid #ffd1df;
    }

    tr:hover {
        background: #ffe6ef;
    }

    .export-btn {
        margin-top: 15px;
        background: #ff3f89;
    }

    .export-btn:hover {
        background: #cc2f6a;
    }
</style>
</head>
<body>

<div class="container">

    <h1>Ideas de Detalles 游눚</h1>
    <div class="heart">游꾸游꾸游꾸</div>

    <label>쯈ui칠n soy?</label>
    <select id="persona">
        <option value="Alejo">Alejo</option>
        <option value="Kate">Kate</option>
    </select>

    <label>Tipo de producto</label>
    <select id="tipo">
        <option value="Cosa">Cosa</option>
        <option value="Comida">Comida</option>
    </select>

    <label>Idea o producto</label>
    <input type="text" id="idea" placeholder="Ej: Flores, Chocolates, Pizza, Perfume...">

    <label>Descripci칩n</label>
    <textarea id="descripcion" placeholder="Detalles, colores, precios..."></textarea>

    <button onclick="agregarIdea()">Agregar Idea 游꾸</button>
    <button class="export-btn" onclick="exportarCSV()">Exportar CSV 游늬</button>

    <table>
        <thead>
            <tr>
                <th>Persona</th>
                <th>Tipo</th>
                <th>Idea</th>
                <th>Descripci칩n</th>
            </tr>
        </thead>
        <tbody id="tablaIdeas"></tbody>
    </table>

</div>

<script>
let ideas = [];

// Cargar CSV autom치ticamente desde GitHub Pages
window.onload = function() {
    fetch("ideas.csv")
        .then(response => response.text())
        .then(text => {
            const lines = text.trim().split("\n").slice(1);

            ideas = lines.map(l => {
                const [persona, tipo, idea, descripcion] = l.split(",");
                return {
                    persona: persona?.replace(/"/g, ""),
                    tipo: tipo?.replace(/"/g, ""),
                    idea: idea?.replace(/"/g, ""),
                    descripcion: descripcion?.replace(/"/g, "")
                };
            });

            renderTabla();
        })
        .catch(err => console.log("CSV no encontrado a칰n:", err));
};

function agregarIdea() {
    const persona = document.getElementById("persona").value;
    const tipo = document.getElementById("tipo").value;
    const idea = document.getElementById("idea").value.trim();
    const descripcion = document.getElementById("descripcion").value.trim();

    if (!idea) return alert("Debes escribir una idea!");

    ideas.push({ persona, tipo, idea, descripcion });
    renderTabla();

    document.getElementById("idea").value = "";
    document.getElementById("descripcion").value = "";
}

function renderTabla() {
    const tabla = document.getElementById("tablaIdeas");
    tabla.innerHTML = "";

    ideas.forEach(i => {
        tabla.innerHTML += `
            <tr>
                <td>${i.persona}</td>
                <td>${i.tipo}</td>
                <td>${i.idea}</td>
                <td>${i.descripcion}</td>
            </tr>
        `;
    });
}

function exportarCSV() {
    let csv = "Persona,Tipo,Idea,Descripcion\n";
    ideas.forEach(i => {
        csv += `"${i.persona}","${i.tipo}","${i.idea}","${i.descripcion}"\n`;
    });

    const blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "ideas.csv";
    a.click();
}
</script>

</body>
</html>
